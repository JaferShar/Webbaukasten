const mongoose = require('mongoose');
const asyncHandler = require('express-async-handler')

const Course = require('../models/Course')
const Account = require('../models/Account')

const setScreen = asyncHandler(async (req, res) => {
    if (!req.body.template) {
        res.status(400)
        throw new Error('Please select a template')
    }

    try {
        const course = await Course.findOneAndUpdate(
            {_id: req.params.id}, 
            {$push: {screens: {template: req.body.template, elements: []}}})
        res.status(200).json(course)
    } catch (error) {
        res.status(400).json({error: error.message})
    }
});